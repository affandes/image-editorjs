!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ImageEditor=e():t.ImageEditor=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);n(1);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e){var n=e.data,i=e.api,a=e.config;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=i,this.data={url:"",caption:"",hasCaption:!0,hasBorder:!1,align:"left"},this.config={placeholder:"Paste image URL here...",urlPatterns:null},this.settingsButton=[{name:"leftAlign",icon:'<i class="fas fa-fw fa-align-left"></i>'},{name:"centerAlign",icon:'<i class="fas fa-fw fa-align-center"></i>'},{name:"rightAlign",icon:'<i class="fas fa-fw fa-align-right"></i>'},{name:"hasBorder",icon:'<i class="fas fa-fw fa-border-style"></i>'},{name:"hasCaption",icon:'<i class="fas fa-fw fa-closed-captioning"></i>'}],Object.assign(this.data,n),Object.assign(this.config,a),this.content=null,this.input=null,this.image=null,this.caption=null,this.settings=null}var e,n,a;return e=t,a=[{key:"toolbox",get:function(){return{title:"Embed Image",icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M3.15 13.628A7.749 7.749 0 0 0 10 17.75a7.74 7.74 0 0 0 6.305-3.242l-2.387-2.127-2.765 2.244-4.389-4.496-3.614 3.5zm-.787-2.303l4.446-4.371 4.52 4.63 2.534-2.057 3.533 2.797c.23-.734.354-1.514.354-2.324a7.75 7.75 0 1 0-15.387 1.325zM10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10z"/>\n</svg>'}}},{key:"CLASS",get:function(){return{content:"aff-image-content",input:"aff-image-input",image:"aff-image-figure",label:"aff-image-caption",setting:"aff-image-setting",align:["left-aligned","center-aligned","right-aligned"]}}},{key:"PATTERN",get:function(){return{urlImage:/(http[s]?:\/\/.*?.(jpg|png|gif|svg))/g}}}],(n=[{key:"render",value:function(){return this._setup(),this.content}},{key:"renderSettings",value:function(){return this._setupSettings()}},{key:"validate",value:function(t){return this._isValidImageURL(t.url)}},{key:"_setup",value:function(){this.content=this._createContent()}},{key:"_createContent",value:function(){var e=document.createElement("div");e.classList.add("cdx-block"),e.classList.add(t.CLASS.content);var n=this._createInputBlock(),i=this._createImageBlock();return e.appendChild(n),e.appendChild(i),e}},{key:"_createInputBlock",value:function(){var e=this,n=this._isValidImageURL(this.data.url);this.input=document.createElement("div"),this.input.classList.add("cdx-input"),this.input.contentEditable=!0,this.input.placeholder="Paste image URL here...",this.input.textContent=this.data.url,this.api.listeners.on(this.input,"blur",(function(t){var n=t.target.textContent;e._isValidImageURL(n)?e._showImage(n):console.log("============")}));var i=document.createElement("div");return i.classList.add(t.CLASS.input),i.hidden=n,i.appendChild(this.input),i}},{key:"_createImageBlock",value:function(){var e=this._isValidImageURL(this.data.url),n=document.createElement("figure");return n.classList.add(t.CLASS.image),"left"===this.data.align?n.classList.add(t.CLASS.align[0]):"center"===this.data.align?n.classList.add(t.CLASS.align[1]):"right"===this.data.align&&n.classList.add(t.CLASS.align[2]),n.hidden=!e,this.image=document.createElement("img"),this.image.src=this.data.url,this.caption=document.createElement("figcaption"),this.caption.contentEditable=!0,this.caption.textContent=this.data.caption,this.caption.hidden=!this.data.hasCaption,this.api.listeners.on(this.caption,"focus",(function(t){t.target.classList.add("cdx-input")})),this.api.listeners.on(this.caption,"blur",(function(t){t.target.classList.remove("cdx-input")})),n.appendChild(this.image),n.appendChild(this.caption),n}},{key:"_showImage",value:function(t){this.image.src=t,this.caption.textContent="Your label here...",this.image.parentNode.hidden=!1,this.input.parentNode.hidden=!0}},{key:"_setupSettings",value:function(){var e=this;this.settings=document.createElement("div"),this.settings.classList.add(t.CLASS.setting),this.settings.hidden=!this.input.parentNode.hidden;for(var n=function(t){var n=document.createElement("div");n.classList.add("cdx-settings-button"),n.innerHTML=e.settingsButton[t].icon,(0===t&&"left"===e.data.align||1===t&&"center"===e.data.align||2===t&&"right"===e.data.align||3===t&&e.data.hasBorder||4===t&&e.data.hasCaption)&&n.classList.add("cdx-settings-button--active"),n.addEventListener("click",(function(n){e._toggleSetting(n,t)})),e.settings.appendChild(n)},i=0;i<this.settingsButton.length;i++)n(i);return this.settings}},{key:"_toggleSetting",value:function(t,e){switch(e){case 0:case 1:case 2:this._setImageAlign(t,e);break;case 3:this._setBorder(t);break;case 4:this._showCaption(t)}}},{key:"_setImageAlign",value:function(e,n){for(var i=this.settings.childNodes,a=this.image.parentNode,r=0;r<3;r++)i[r].classList.remove("cdx-settings-button--active"),a.classList.remove(t.CLASS.align[r]);i[n].classList.add("cdx-settings-button--active"),a.classList.add(t.CLASS.align[n])}},{key:"_setBorder",value:function(t){("I"===t.target.tagName?t.target.parentNode:t.target).classList.toggle("cdx-settings-button--active"),this.image.classList.toggle("has-border")}},{key:"_showCaption",value:function(t){("I"===t.target.tagName?t.target.parentNode:t.target).classList.toggle("cdx-settings-button--active"),this.caption.hidden=!this.caption.hidden}},{key:"_isValidImageURL",value:function(e){if(null==e)return console.log("URL is undefined or null!"),!1;if(""===e)return console.log("URL is empty!"),!1;if(console.log("Validating URL Pattern"),null===this.config.urlPatterns){if(console.log("Default pattern..."),null===e.match(t.PATTERN.urlImage))return!1}else if("function"==typeof this.config.urlPatterns.test){if(console.log("Custom pattern..."),null===e.match(this.config.urlPatterns))return!1}else if("function"==typeof this.config.urlPatterns.push){console.log("Custom patterns...");for(var n=!1,i=0;i<this.config.urlPatterns.length;i++)if(null!==e.match(this.config.urlPatterns[i])){n=!0;break}return n}return console.log("Else pattern..."),!0}},{key:"save",value:function(t){var e=this.image.parentNode,n=e.classList.contains("left-aligned")?"left":e.classList.contains("center-aligned")?"center":e.classList.contains("right-aligned")?"right":"";return{url:this.input.textContent,caption:this.caption.textContent,hasCaption:!this.caption.hidden,hasBorder:this.image.classList.contains("has-border"),align:n}}}])&&i(e.prototype,n),a&&i(e,a),t}();e.default=a},function(t,e,n){var i=n(2),a=n(3);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var r={insert:"head",singleton:!1},s=(i(a,r),a.locals?a.locals:{});t.exports=s},function(t,e,n){"use strict";var i,a=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function o(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},i=[],a=0;a<t.length;a++){var r=t[a],c=e.base?r[0]+e.base:r[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=o(u),f={css:r[1],media:r[2],sourceMap:r[3]};-1!==d?(s[d].references++,s[d].updater(f)):s.push({identifier:u,updater:m(f,e),references:1}),i.push(u)}return i}function l(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var a=n.nc;a&&(i.nonce=a)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var s=r(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,n,i){var a=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=d(e,a);else{var r=document.createTextNode(a),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function g(t,e,n){var i=n.css,a=n.media,r=n.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),r&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var h=null,p=0;function m(t,e){var n,i,a;if(e.singleton){var r=p++;n=h||(h=l(e)),i=f.bind(null,n,r,!1),a=f.bind(null,n,r,!0)}else n=l(e),i=g.bind(null,n,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=a());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var a=o(n[i]);s[a].references--}for(var r=c(t,e),l=0;l<n.length;l++){var u=o(n[l]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}n=r}}}},function(t,e,n){(e=n(4)(!1)).push([t.i,".aff-image-content .has-border {\r\n    border: solid 1px black;\r\n}\r\n.aff-image-content .left-aligned {\r\n    text-align: left;\r\n}\r\n.aff-image-content .center-aligned {\r\n    text-align: center;\r\n}\r\n.aff-image-content .right-aligned {\r\n    text-align: right;\r\n}\r\n.aff-image-figure {\r\n    max-width: 100%;\r\n}\r\n.aff-image-figure img {\r\n    max-width: 100%;\r\n}\r\n.aff-image-figure figcaption {\r\n    color: #525252;\r\n}\r\n.aff-image-setting i {\r\n    margin: 8px auto;\r\n}",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var a=(s=i,o=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(c," */")),r=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(r).concat([a]).join("\n")}var s,o,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(i)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(a[s]=!0)}for(var o=0;o<t.length;o++){var c=[].concat(t[o]);i&&a[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9JbWFnZUVkaXRvci93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vSW1hZ2VFZGl0b3Ivd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vSW1hZ2VFZGl0b3IvLi9zcmMvaW1hZ2UtZWRpdG9yLmpzIiwid2VicGFjazovL0ltYWdlRWRpdG9yLy4vc3JjL3N0eWxlLmNzcz83MTYzIiwid2VicGFjazovL0ltYWdlRWRpdG9yLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL0ltYWdlRWRpdG9yLy4vc3JjL3N0eWxlLmNzcyIsIndlYnBhY2s6Ly9JbWFnZUVkaXRvci8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkltYWdlRWRpdG9yIiwiZGF0YSIsImFwaSIsImNvbmZpZyIsInRoaXMiLCJ1cmwiLCJjYXB0aW9uIiwiaGFzQ2FwdGlvbiIsImhhc0JvcmRlciIsImFsaWduIiwicGxhY2Vob2xkZXIiLCJ1cmxQYXR0ZXJucyIsInNldHRpbmdzQnV0dG9uIiwiaWNvbiIsImFzc2lnbiIsImNvbnRlbnQiLCJpbnB1dCIsImltYWdlIiwic2V0dGluZ3MiLCJ0aXRsZSIsImxhYmVsIiwic2V0dGluZyIsInVybEltYWdlIiwiX3NldHVwIiwiX3NldHVwU2V0dGluZ3MiLCJfaXNWYWxpZEltYWdlVVJMIiwiX2NyZWF0ZUNvbnRlbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJDTEFTUyIsImlucHV0QmxvY2siLCJfY3JlYXRlSW5wdXRCbG9jayIsImltYWdlQmxvY2siLCJfY3JlYXRlSW1hZ2VCbG9jayIsImFwcGVuZENoaWxkIiwiaGFzVmFsaWRJbWFnZVVybCIsImNvbnRlbnRFZGl0YWJsZSIsInRleHRDb250ZW50IiwibGlzdGVuZXJzIiwib24iLCJldmVudCIsImltYWdlVXJsIiwidGFyZ2V0IiwiX3Nob3dJbWFnZSIsImNvbnNvbGUiLCJsb2ciLCJ3cmFwcGVyIiwiaGlkZGVuIiwiZmlnIiwic3JjIiwicmVtb3ZlIiwicGFyZW50Tm9kZSIsImJ1dHRvbiIsImlubmVySFRNTCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldiIsIl90b2dnbGVTZXR0aW5nIiwibGVuZ3RoIiwiaWQiLCJfc2V0SW1hZ2VBbGlnbiIsIl9zZXRCb3JkZXIiLCJfc2hvd0NhcHRpb24iLCJjaGlsZE5vZGVzIiwiaW1hZ2VQYXJlbnQiLCJ0YWdOYW1lIiwidG9nZ2xlIiwidW5kZWZpbmVkIiwibWF0Y2giLCJQQVRURVJOIiwidGVzdCIsInB1c2giLCJpc1ZhbGlkIiwiY29udGFpbnMiLCJkZWZhdWx0Iiwib3B0aW9ucyIsImV4cG9ydGVkIiwibG9jYWxzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsIm1vZHVsZXNUb0RvbSIsImxpc3QiLCJpZENvdW50TWFwIiwiaWRlbnRpZmllcnMiLCJpdGVtIiwiYmFzZSIsImNvdW50IiwiY29uY2F0IiwiaW5kZXgiLCJvYmoiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImF0dHJpYnV0ZXMiLCJub25jZSIsImtleXMiLCJmb3JFYWNoIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0IiwiRXJyb3IiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiYXBwbHlUb1RhZyIsInJlbW92ZUF0dHJpYnV0ZSIsImJ0b2EiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJuZXdPYmoiLCJsYXN0SWRlbnRpZmllcnMiLCJuZXdMaXN0IiwidG9TdHJpbmciLCJuZXdMYXN0SWRlbnRpZmllcnMiLCJfaSIsIl9pbmRleCIsInNwbGljZSIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsInVzZVNvdXJjZU1hcCIsIm1hcCIsImNzc01hcHBpbmciLCJzb3VyY2VNYXBwaW5nIiwiYmFzZTY0Iiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290IiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnki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MUMsSUFBSW5ELEVBQU8sR0FBR0csT0FBT3BJLEVBQVFvTCxJQUV6QmUsR0FBVUMsRUFBdUJuRSxFQUFLLE1BS3RDaUUsSUFDR2pFLEVBQUssR0FHUkEsRUFBSyxHQUFLLEdBQUdHLE9BQU84RCxFQUFZLFNBQVM5RCxPQUFPSCxFQUFLLElBRnJEQSxFQUFLLEdBQUtpRSxHQU1kcEUsRUFBS3hCLEtBQUsyQixNQUlQSCIsImZpbGUiOiJpbWFnZS1lZGl0b3IubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiSW1hZ2VFZGl0b3JcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiSW1hZ2VFZGl0b3JcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBcIi4vc3R5bGUuY3NzXCJcclxuXHJcblxyXG4vKipcclxuICogRWRpdG9ySnMgUGx1Z2luIGZvciBJbWFnZSBFbWJlZGRpbmdcclxuICogRm9yIGJsb2NrIG9ubHlcclxuICogwqkyMDIwIGFmZmFuZGVzQGdtYWlsLmNvbVxyXG4gKlxyXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBJbWFnZURhdGFcclxuICogQGRlc2NyaXB0aW9uIERhdGEgc3RydWN0dXJlIGZvciBpbnB1dCBhbmQgb3V0cHV0LlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdXJsIC0gVXJsIG9mIGltYWdlXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjYXB0aW9uIC0gQ2FwdGlvbiBmb3IgaW1hZ2VcclxuICogQHByb3BlcnR5IHtib29sZWFufSBoYXNDYXB0aW9uIC0gSXMgc2hvdyBjYXB0aW9uP1xyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGhhc0JvcmRlciAtIElzIGltYWdlIGhhcyBib3JkZXI/XHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBhbGlnbiAtIEltYWdlIGFsaWdubWVudCB7bGVmdCwgY2VudGVyLCByaWdodH1cclxuICpcclxuICovXHJcbmNsYXNzIEltYWdlRWRpdG9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIG5ldyBwbHVnaW4gYW5kIGluaXRpYXRlIGRhdGFcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0ltYWdlRGF0YX0gICBkYXRhICAgIC0gc2F2ZWQgZGF0YSBpbiBKU09OXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gICAgICBhcGkgICAgIC0gRWRpdG9ySnMgQVBJXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gICAgICBjb25maWcgIC0gdXNlciBjb25maWcgaW5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Ioe2RhdGEsIGFwaSwgY29uZmlnfSkge1xyXG4gICAgICAgIHRoaXMuYXBpID0gYXBpO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgdXJsOiAnJyxcclxuICAgICAgICAgICAgY2FwdGlvbjogJycsXHJcbiAgICAgICAgICAgIGhhc0NhcHRpb246IHRydWUsXHJcbiAgICAgICAgICAgIGhhc0JvcmRlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIGFsaWduOiAnbGVmdCdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0ge1xyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1Bhc3RlIGltYWdlIFVSTCBoZXJlLi4uJyxcclxuICAgICAgICAgICAgdXJsUGF0dGVybnM6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NCdXR0b24gPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdsZWZ0QWxpZ24nLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWZ3IGZhLWFsaWduLWxlZnRcIj48L2k+J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnY2VudGVyQWxpZ24nLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWZ3IGZhLWFsaWduLWNlbnRlclwiPjwvaT4nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdyaWdodEFsaWduJyxcclxuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1mdyBmYS1hbGlnbi1yaWdodFwiPjwvaT4nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdoYXNCb3JkZXInLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWZ3IGZhLWJvcmRlci1zdHlsZVwiPjwvaT4nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdoYXNDYXB0aW9uJyxcclxuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1mdyBmYS1jbG9zZWQtY2FwdGlvbmluZ1wiPjwvaT4nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXTtcclxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZGF0YSwgZGF0YSk7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbmZpZywgY29uZmlnKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmlucHV0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmltYWdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNhcHRpb24gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB0aGlzLl9zZXR1cCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHVwU2V0dGluZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZShkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzVmFsaWRJbWFnZVVSTChkYXRhLnVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldHVwKCkge1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IHRoaXMuX2NyZWF0ZUNvbnRlbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ29udGVudCgpIHtcclxuICAgICAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnY2R4LWJsb2NrJyk7XHJcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKEltYWdlRWRpdG9yLkNMQVNTLmNvbnRlbnQpO1xyXG5cclxuICAgICAgICBsZXQgaW5wdXRCbG9jayA9IHRoaXMuX2NyZWF0ZUlucHV0QmxvY2soKTtcclxuICAgICAgICBsZXQgaW1hZ2VCbG9jayA9IHRoaXMuX2NyZWF0ZUltYWdlQmxvY2soKTtcclxuXHJcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChpbnB1dEJsb2NrKTtcclxuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGltYWdlQmxvY2spO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlSW5wdXRCbG9jaygpIHtcclxuICAgICAgICBsZXQgaGFzVmFsaWRJbWFnZVVybCA9IHRoaXMuX2lzVmFsaWRJbWFnZVVSTCh0aGlzLmRhdGEudXJsKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMuaW5wdXQuY2xhc3NMaXN0LmFkZCgnY2R4LWlucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5jb250ZW50RWRpdGFibGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaW5wdXQucGxhY2Vob2xkZXIgPSAnUGFzdGUgaW1hZ2UgVVJMIGhlcmUuLi4nO1xyXG4gICAgICAgIHRoaXMuaW5wdXQudGV4dENvbnRlbnQgPSB0aGlzLmRhdGEudXJsO1xyXG5cclxuICAgICAgICB0aGlzLmFwaS5saXN0ZW5lcnMub24odGhpcy5pbnB1dCwgJ2JsdXInLCAoZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaW1hZ2VVcmwgPSBldmVudC50YXJnZXQudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIGlmKCAhdGhpcy5faXNWYWxpZEltYWdlVVJMKGltYWdlVXJsKSApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT0nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Nob3dJbWFnZShpbWFnZVVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGxldCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKEltYWdlRWRpdG9yLkNMQVNTLmlucHV0KTtcclxuICAgICAgICB3cmFwcGVyLmhpZGRlbiA9IGhhc1ZhbGlkSW1hZ2VVcmw7XHJcblxyXG4gICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5pbnB1dCk7XHJcblxyXG4gICAgICAgIHJldHVybiB3cmFwcGVyO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVJbWFnZUJsb2NrKCkge1xyXG4gICAgICAgIGxldCBoYXNWYWxpZEltYWdlVXJsID0gdGhpcy5faXNWYWxpZEltYWdlVVJMKHRoaXMuZGF0YS51cmwpO1xyXG5cclxuICAgICAgICBsZXQgZmlnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmlndXJlJyk7XHJcbiAgICAgICAgZmlnLmNsYXNzTGlzdC5hZGQoSW1hZ2VFZGl0b3IuQ0xBU1MuaW1hZ2UpO1xyXG4gICAgICAgIGlmKCB0aGlzLmRhdGEuYWxpZ24gPT09ICdsZWZ0JyApIHtcclxuICAgICAgICAgICAgZmlnLmNsYXNzTGlzdC5hZGQoSW1hZ2VFZGl0b3IuQ0xBU1MuYWxpZ25bMF0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiggdGhpcy5kYXRhLmFsaWduID09PSAnY2VudGVyJyApIHtcclxuICAgICAgICAgICAgZmlnLmNsYXNzTGlzdC5hZGQoSW1hZ2VFZGl0b3IuQ0xBU1MuYWxpZ25bMV0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiggdGhpcy5kYXRhLmFsaWduID09PSAncmlnaHQnICkge1xyXG4gICAgICAgICAgICBmaWcuY2xhc3NMaXN0LmFkZChJbWFnZUVkaXRvci5DTEFTUy5hbGlnblsyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpZy5oaWRkZW4gPSAhaGFzVmFsaWRJbWFnZVVybDtcclxuXHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gdGhpcy5kYXRhLnVybDtcclxuXHJcbiAgICAgICAgdGhpcy5jYXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmlnY2FwdGlvbicpO1xyXG4gICAgICAgIHRoaXMuY2FwdGlvbi5jb250ZW50RWRpdGFibGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2FwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuZGF0YS5jYXB0aW9uO1xyXG4gICAgICAgIHRoaXMuY2FwdGlvbi5oaWRkZW4gPSAhdGhpcy5kYXRhLmhhc0NhcHRpb247XHJcblxyXG4gICAgICAgIHRoaXMuYXBpLmxpc3RlbmVycy5vbih0aGlzLmNhcHRpb24sICdmb2N1cycsIChldmVudCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBlbG0gPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgIGVsbS5jbGFzc0xpc3QuYWRkKCdjZHgtaW5wdXQnKTtcclxuICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIHRoaXMuYXBpLmxpc3RlbmVycy5vbih0aGlzLmNhcHRpb24sICdibHVyJywgKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgbGV0IGVsbSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgZWxtLmNsYXNzTGlzdC5yZW1vdmUoJ2NkeC1pbnB1dCcpO1xyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgZmlnLmFwcGVuZENoaWxkKHRoaXMuaW1hZ2UpO1xyXG4gICAgICAgIGZpZy5hcHBlbmRDaGlsZCh0aGlzLmNhcHRpb24pO1xyXG5cclxuICAgICAgICByZXR1cm4gZmlnO1xyXG4gICAgfVxyXG5cclxuICAgIF9zaG93SW1hZ2UodXJsKSB7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSB1cmw7XHJcbiAgICAgICAgdGhpcy5jYXB0aW9uLnRleHRDb250ZW50ID0gJ1lvdXIgbGFiZWwgaGVyZS4uLic7XHJcblxyXG4gICAgICAgIGxldCBpbWFnZUJsb2NrID0gdGhpcy5pbWFnZS5wYXJlbnROb2RlO1xyXG4gICAgICAgIGltYWdlQmxvY2suaGlkZGVuID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBpbnB1dEJsb2NrID0gdGhpcy5pbnB1dC5wYXJlbnROb2RlO1xyXG4gICAgICAgIGlucHV0QmxvY2suaGlkZGVuID0gdHJ1ZTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgX3NldHVwU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuY2xhc3NMaXN0LmFkZChJbWFnZUVkaXRvci5DTEFTUy5zZXR0aW5nKTtcclxuICAgICAgICB0aGlzLnNldHRpbmdzLmhpZGRlbiA9ICF0aGlzLmlucHV0LnBhcmVudE5vZGUuaGlkZGVuO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2V0dGluZ3NCdXR0b24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnY2R4LXNldHRpbmdzLWJ1dHRvbicpO1xyXG4gICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gdGhpcy5zZXR0aW5nc0J1dHRvbltpXS5pY29uO1xyXG5cclxuICAgICAgICAgICAgaWYoXHJcbiAgICAgICAgICAgICAgICAoaSA9PT0gMCAmJiB0aGlzLmRhdGEuYWxpZ24gPT09ICdsZWZ0JylcclxuICAgICAgICAgICAgICAgIHx8IChpID09PSAxICYmIHRoaXMuZGF0YS5hbGlnbiA9PT0gJ2NlbnRlcicpXHJcbiAgICAgICAgICAgICAgICB8fCAoaSA9PT0gMiAmJiB0aGlzLmRhdGEuYWxpZ24gPT09ICdyaWdodCcpXHJcbiAgICAgICAgICAgICAgICB8fCAoaSA9PT0gMyAmJiB0aGlzLmRhdGEuaGFzQm9yZGVyKVxyXG4gICAgICAgICAgICAgICAgfHwgKGkgPT09IDQgJiYgdGhpcy5kYXRhLmhhc0NhcHRpb24pXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NkeC1zZXR0aW5ncy1idXR0b24tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlU2V0dGluZyhldiwgaSk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzO1xyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVTZXR0aW5nKGV2ZW50LCBpZCkge1xyXG4gICAgICAgIHN3aXRjaCAoaWQpIHtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldEltYWdlQWxpZ24oZXZlbnQsIGlkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRCb3JkZXIoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Nob3dDYXB0aW9uKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfc2V0SW1hZ2VBbGlnbihldmVudCwgaWQpIHtcclxuICAgICAgICBsZXQgc2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzLmNoaWxkTm9kZXM7XHJcbiAgICAgICAgbGV0IGltYWdlUGFyZW50ID0gdGhpcy5pbWFnZS5wYXJlbnROb2RlO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgICAgICBzZXR0aW5nc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdjZHgtc2V0dGluZ3MtYnV0dG9uLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgaW1hZ2VQYXJlbnQuY2xhc3NMaXN0LnJlbW92ZShJbWFnZUVkaXRvci5DTEFTUy5hbGlnbltpXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXR0aW5nc1tpZF0uY2xhc3NMaXN0LmFkZCgnY2R4LXNldHRpbmdzLWJ1dHRvbi0tYWN0aXZlJyk7XHJcbiAgICAgICAgaW1hZ2VQYXJlbnQuY2xhc3NMaXN0LmFkZChJbWFnZUVkaXRvci5DTEFTUy5hbGlnbltpZF0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRCb3JkZXIoZXZlbnQpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT09ICdJJyA/IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlIDogZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdjZHgtc2V0dGluZ3MtYnV0dG9uLS1hY3RpdmUnKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbWFnZS5jbGFzc0xpc3QudG9nZ2xlKCdoYXMtYm9yZGVyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dDYXB0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IHRhcmdldCA9IGV2ZW50LnRhcmdldC50YWdOYW1lID09PSAnSScgPyBldmVudC50YXJnZXQucGFyZW50Tm9kZSA6IGV2ZW50LnRhcmdldDtcclxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnY2R4LXNldHRpbmdzLWJ1dHRvbi0tYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FwdGlvbi5oaWRkZW4gPSAhdGhpcy5jYXB0aW9uLmhpZGRlbjtcclxuICAgIH1cclxuXHJcbiAgICBfaXNWYWxpZEltYWdlVVJMKHVybCkge1xyXG4gICAgICAgIGlmKCB1bmRlZmluZWQgPT09IHVybCB8fCBudWxsID09PSB1cmwgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVUkwgaXMgdW5kZWZpbmVkIG9yIG51bGwhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYoICcnID09PSB1cmwgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVUkwgaXMgZW1wdHkhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmFsaWRhdGluZyBVUkwgUGF0dGVybicpO1xyXG4gICAgICAgICAgICBpZiggdGhpcy5jb25maWcudXJsUGF0dGVybnMgPT09IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGVmYXVsdCBwYXR0ZXJuLi4uJyk7XHJcbiAgICAgICAgICAgICAgICBpZiggdXJsLm1hdGNoKEltYWdlRWRpdG9yLlBBVFRFUk4udXJsSW1hZ2UpID09PSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmKCB0eXBlb2YgdGhpcy5jb25maWcudXJsUGF0dGVybnMudGVzdCA9PT0gJ2Z1bmN0aW9uJyApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDdXN0b20gcGF0dGVybi4uLicpO1xyXG4gICAgICAgICAgICAgICAgaWYoIHVybC5tYXRjaCh0aGlzLmNvbmZpZy51cmxQYXR0ZXJucykgPT09IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYoIHR5cGVvZiB0aGlzLmNvbmZpZy51cmxQYXR0ZXJucy5wdXNoID09PSAnZnVuY3Rpb24nICkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0N1c3RvbSBwYXR0ZXJucy4uLicpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maWcudXJsUGF0dGVybnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiggdXJsLm1hdGNoKHRoaXMuY29uZmlnLnVybFBhdHRlcm5zW2ldKSAhPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRWxzZSBwYXR0ZXJuLi4uJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzYXZlKGNvbnRlbnQpIHtcclxuICAgICAgICBsZXQgaW1hZ2VQYXJlbnQgPSB0aGlzLmltYWdlLnBhcmVudE5vZGU7XHJcbiAgICAgICAgbGV0IGFsaWduID0gKGltYWdlUGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnbGVmdC1hbGlnbmVkJykgPyAnbGVmdCcgOiAoaW1hZ2VQYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjZW50ZXItYWxpZ25lZCcpID8gJ2NlbnRlcicgOiAoaW1hZ2VQYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyaWdodC1hbGlnbmVkJykgPyAncmlnaHQnIDogJycpKSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVybDogdGhpcy5pbnB1dC50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgY2FwdGlvbjogdGhpcy5jYXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBoYXNDYXB0aW9uOiAhdGhpcy5jYXB0aW9uLmhpZGRlbixcclxuICAgICAgICAgICAgaGFzQm9yZGVyOiB0aGlzLmltYWdlLmNsYXNzTGlzdC5jb250YWlucygnaGFzLWJvcmRlcicpLFxyXG4gICAgICAgICAgICBhbGlnbjogYWxpZ25cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCB0b29sYm94KCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnRW1iZWQgSW1hZ2UnLFxyXG4gICAgICAgICAgICBpY29uOiAnPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxcbicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICA8cGF0aCBkPVwiTTMuMTUgMTMuNjI4QTcuNzQ5IDcuNzQ5IDAgMCAwIDEwIDE3Ljc1YTcuNzQgNy43NCAwIDAgMCA2LjMwNS0zLjI0MmwtMi4zODctMi4xMjctMi43NjUgMi4yNDQtNC4zODktNC40OTYtMy42MTQgMy41em0tLjc4Ny0yLjMwM2w0LjQ0Ni00LjM3MSA0LjUyIDQuNjMgMi41MzQtMi4wNTcgMy41MzMgMi43OTdjLjIzLS43MzQuMzU0LTEuNTE0LjM1NC0yLjMyNGE3Ljc1IDcuNzUgMCAxIDAtMTUuMzg3IDEuMzI1ek0xMCAyMEM0LjQ3NyAyMCAwIDE1LjUyMyAwIDEwUzQuNDc3IDAgMTAgMHMxMCA0LjQ3NyAxMCAxMC00LjQ3NyAxMC0xMCAxMHpcIi8+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAnPC9zdmc+J1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBDTEFTUygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjb250ZW50OiAnYWZmLWltYWdlLWNvbnRlbnQnLFxyXG4gICAgICAgICAgICBpbnB1dDogJ2FmZi1pbWFnZS1pbnB1dCcsXHJcbiAgICAgICAgICAgIGltYWdlOiAnYWZmLWltYWdlLWZpZ3VyZScsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnYWZmLWltYWdlLWNhcHRpb24nLFxyXG4gICAgICAgICAgICBzZXR0aW5nOiAnYWZmLWltYWdlLXNldHRpbmcnLFxyXG4gICAgICAgICAgICBhbGlnbjogW1xyXG4gICAgICAgICAgICAgICAgJ2xlZnQtYWxpZ25lZCcsXHJcbiAgICAgICAgICAgICAgICAnY2VudGVyLWFsaWduZWQnLFxyXG4gICAgICAgICAgICAgICAgJ3JpZ2h0LWFsaWduZWQnLFxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IFBBVFRFUk4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdXJsSW1hZ2U6IC8oaHR0cFtzXT86XFwvXFwvLio/LihqcGd8cG5nfGdpZnxzdmcpKS9nXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VFZGl0b3I7IiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlLmNzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxudmFyIGV4cG9ydGVkID0gY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHt9O1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRlZDsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbnZhciBzdHlsZXNJbkRvbSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRG9tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRG9tW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc0luRG9tLnB1c2goe1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiBhZGRTdHlsZShvYmosIG9wdGlvbnMpLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICB2YXIgYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcblxuICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLm1lZGlhID8gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKS5jb25jYXQob2JqLmNzcywgXCJ9XCIpIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ21lZGlhJyk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXdMaXN0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRvbVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5Eb21bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5Eb20uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmFmZi1pbWFnZS1jb250ZW50IC5oYXMtYm9yZGVyIHtcXHJcXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggYmxhY2s7XFxyXFxufVxcclxcbi5hZmYtaW1hZ2UtY29udGVudCAubGVmdC1hbGlnbmVkIHtcXHJcXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcXHJcXG59XFxyXFxuLmFmZi1pbWFnZS1jb250ZW50IC5jZW50ZXItYWxpZ25lZCB7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG59XFxyXFxuLmFmZi1pbWFnZS1jb250ZW50IC5yaWdodC1hbGlnbmVkIHtcXHJcXG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XFxyXFxufVxcclxcbi5hZmYtaW1hZ2UtZmlndXJlIHtcXHJcXG4gICAgbWF4LXdpZHRoOiAxMDAlO1xcclxcbn1cXHJcXG4uYWZmLWltYWdlLWZpZ3VyZSBpbWcge1xcclxcbiAgICBtYXgtd2lkdGg6IDEwMCU7XFxyXFxufVxcclxcbi5hZmYtaW1hZ2UtZmlndXJlIGZpZ2NhcHRpb24ge1xcclxcbiAgICBjb2xvcjogIzUyNTI1MjtcXHJcXG59XFxyXFxuLmFmZi1pbWFnZS1zZXR0aW5nIGkge1xcclxcbiAgICBtYXJnaW46IDhweCBhdXRvO1xcclxcbn1cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVzZVNvdXJjZU1hcCkge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKCcnKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5LCBkZWR1cGUpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsICcnXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfaV0pO1xuXG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRpbnVlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCJcIi5jb25jYXQobWVkaWFRdWVyeSwgXCIgYW5kIFwiKS5jb25jYXQoaXRlbVsyXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG5cbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgJycpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn0gLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuXG5cbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gIHJldHVybiBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG59Il0sInNvdXJjZVJvb3QiOiIifQ==