!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ImageEditor=t():e.ImageEditor=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){var n=t.data,r=t.config,i=t.api;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=i,this.data={url:"",caption:"",captionPosition:"bottom",hasBorder:!1,imageSize:"medium"},this.config={placeholder:"Paste image URL here..."},this.settings=[{name:"leftAlign",icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.8 10.592v2.043h2.35v2.138H15.8v2.232h-2.25v-2.232h-2.4v-2.138h2.4v-2.28h2.25v.237h1.15-1.15zM1.9 8.455v-3.42c0-1.154.985-2.09 2.2-2.09h4.2v2.137H4.15v3.373H1.9zm0 2.137h2.25v3.325H8.3v2.138H4.1c-1.215 0-2.2-.936-2.2-2.09v-3.373zm15.05-2.137H14.7V5.082h-4.15V2.945h4.2c1.215 0 2.2.936 2.2 2.09v3.42z"/></svg>'},{name:"centerAlign",icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.8 10.592v2.043h2.35v2.138H15.8v2.232h-2.25v-2.232h-2.4v-2.138h2.4v-2.28h2.25v.237h1.15-1.15zM1.9 8.455v-3.42c0-1.154.985-2.09 2.2-2.09h4.2v2.137H4.15v3.373H1.9zm0 2.137h2.25v3.325H8.3v2.138H4.1c-1.215 0-2.2-.936-2.2-2.09v-3.373zm15.05-2.137H14.7V5.082h-4.15V2.945h4.2c1.215 0 2.2.936 2.2 2.09v3.42z"/></svg>'},{name:"rightAlign",icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.8 10.592v2.043h2.35v2.138H15.8v2.232h-2.25v-2.232h-2.4v-2.138h2.4v-2.28h2.25v.237h1.15-1.15zM1.9 8.455v-3.42c0-1.154.985-2.09 2.2-2.09h4.2v2.137H4.15v3.373H1.9zm0 2.137h2.25v3.325H8.3v2.138H4.1c-1.215 0-2.2-.936-2.2-2.09v-3.373zm15.05-2.137H14.7V5.082h-4.15V2.945h4.2c1.215 0 2.2.936 2.2 2.09v3.42z"/></svg>'},{name:"hasBorder",icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0.000000,25.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none"><path d="M45 200 c-3 -5 -1 -10 4 -10 6 0 11 5 11 10 0 6 -2 10 -4 10 -3 0 -8 -4 -11 -10z"/><path d="M138 203 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"/><path d="M185 200 c3 -5 11 -10 16 -10 6 0 7 5 4 10 -3 6 -11 10 -16 10 -6 0 -7 -4 -4 -10z"/><path d="M201 154 c0 -11 3 -14 6 -6 3 7 2 16 -1 19 -3 4 -6 -2 -5 -13z"/><path d="M41 104 c0 -11 3 -14 6 -6 3 7 2 16 -1 19 -3 4 -6 -2 -5 -13z"/><path d="M201 104 c0 -11 3 -14 6 -6 3 7 2 16 -1 19 -3 4 -6 -2 -5 -13z"/><path d="M40 61 c0 -5 5 -13 10 -16 6 -3 10 -2 10 4 0 5 -4 13 -10 16 -5 3 -10 2 -10 -4z"/><path d="M189 53 c-13 -16 -12 -17 4 -4 9 7 17 15 17 17 0 8 -8 3 -21 -13z"/><path d="M88 43 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"/><path d="M138 43 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"/></g></svg>'},{name:"captionPosition",icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.8 10.592v2.043h2.35v2.138H15.8v2.232h-2.25v-2.232h-2.4v-2.138h2.4v-2.28h2.25v.237h1.15-1.15zM1.9 8.455v-3.42c0-1.154.985-2.09 2.2-2.09h4.2v2.137H4.15v3.373H1.9zm0 2.137h2.25v3.325H8.3v2.138H4.1c-1.215 0-2.2-.936-2.2-2.09v-3.373zm15.05-2.137H14.7V5.082h-4.15V2.945h4.2c1.215 0 2.2.936 2.2 2.09v3.42z"/></svg>'}],Object.assign(this.data,n),Object.assign(this.config,r),this.wrapper=null}var t,n,i;return t=e,i=[{key:"toolbox",get:function(){return{title:"Embed Image",icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M3.15 13.628A7.749 7.749 0 0 0 10 17.75a7.74 7.74 0 0 0 6.305-3.242l-2.387-2.127-2.765 2.244-4.389-4.496-3.614 3.5zm-.787-2.303l4.446-4.371 4.52 4.63 2.534-2.057 3.533 2.797c.23-.734.354-1.514.354-2.324a7.75 7.75 0 1 0-15.387 1.325zM10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10z"/>\n</svg>'}}},{key:"CLASS",get:function(){return{wrapper:"aff-image-wrapper",figure:"aff-image-figure"}}},{key:"PATTERN",get:function(){return{urlImage:/(http[s]?:\/\/.*?.(jpg|png|gif|svg))/g}}}],(n=[{key:"render",value:function(){return console.log("Run: render()"),this._setup(),this.wrapper}},{key:"validate",value:function(e){return!(!e&&!e.url.trim())}},{key:"_setup",value:function(){console.log("Run: setup()"),this._createWrapper(),this.data.url?this._createImage():this._createUrlInput()}},{key:"_createWrapper",value:function(){console.log("Run: Wrapper()"),this.wrapper=document.createElement("div"),this.wrapper.classList.add("cdx-block"),this.wrapper.classList.add(e.CLASS.wrapper)}},{key:"_clearWrapper",value:function(){this.wrapper&&(this.wrapper.innerHTML="")}},{key:"_createUrlInput",value:function(){var t=this;console.log("Run: UrlInput()");var n=document.createElement("div");n.contentEditable=!0,n.classList.add("cdx-input"),n.placeholder="Coba dulu",this._clearWrapper(),this.wrapper.appendChild(n),this.api.listeners.on(this.wrapper.childNodes[0],"blur",(function(n){n.target.textContent?null===n.target.textContent.match(e.PATTERN.urlImage)?console.warn("Invalid URL!"):t._createImage():console.warn("No file loaded!")}))}},{key:"_createImage",value:function(){console.log("Run: createImage()",this.data);var t=document.createElement("figure"),n=document.createElement("img"),r=document.createElement("figcaption");r.textContent=this.data.caption?this.data.caption:"Your label here...",r.contentEditable=!0,r.addEventListener("focus",(function(e){e.target.classList.add("cdx-input")})),r.addEventListener("blur",(function(e){""===e.target.textContent&&(e.target.hidden=!0),e.target.classList.remove("cdx-input")})),n.src=this.data.url?this.data.url:this.wrapper.childNodes[0].textContent,t.classList.add(e.CLASS.figure),this._clearWrapper(),"top"===this.data.captionPosition&&""!==r.textContent&&t.appendChild(r),t.appendChild(n),"bottom"===this.data.captionPosition&&""!==r.textContent&&t.appendChild(r),this.wrapper.appendChild(t)}},{key:"_createSetting",value:function(){for(var e=this,t=document.createElement("div"),n=function(n){var r=document.createElement("div");r.classList.add("cdx-settings-button"),r.innerHTML=e.settings[n].icon,r.addEventListener("click",(function(){e._toggleSetting(e.settings[n].name),r.classList.toggle("cdx-settings-button--active")})),t.appendChild(r)},r=0;r<this.settings.length;r++)n(r);return t}},{key:"_toggleSetting",value:function(e){e===this.settings[3].name&&this.wrapper.childNodes[0].childNodes[0].classList.toggle("has-border"),e===this.settings[4].name&&this.api.blocks.stretchBlock(this.api.blocks.getCurrentBlockIndex(),!!this.data.imageSize)}},{key:"save",value:function(e){return""!==this.data.url.trim()?{url:"top"===this.data.captionPosition?this.wrapper.childNodes[0].childNodes[1].src:this.wrapper.childNodes[0].childNodes[0].src,caption:"top"===this.data.captionPosition?this.wrapper.childNodes[0].childNodes[0].textContent:this.wrapper.childNodes[0].childNodes[1].textContent}:{}}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},function(e,t,n){var r=n(2),i=n(3);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function c(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var a=e[i],s=t.base?a[0]+t.base:a[0],l=n[s]||0,u="".concat(s," ").concat(l);n[s]=l+1;var d=c(u),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(o[d].references++,o[d].updater(h)):o.push({identifier:u,updater:g(h,t),references:1}),r.push(u)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function h(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function p(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,v=0;function g(e,t){var n,r,i;if(t.singleton){var a=v++;n=f||(f=l(t)),r=h.bind(null,n,a,!1),i=h.bind(null,n,a,!0)}else n=l(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=c(n[r]);o[i].references--}for(var a=s(e,t),l=0;l<n.length;l++){var u=c(n[l]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=a}}}},function(e,t,n){(t=n(4)(!1)).push([e.i,".aff-image-wrapper .has-border {\r\n    border: solid 1px black;\r\n}\r\n.aff-image-wrapper .left-aligned {\r\n    text-align: left;\r\n}\r\n.aff-image-wrapper .centered-aligned {\r\n    text-align: center;\r\n}\r\n.aff-image-wrapper .right-aligned {\r\n    text-align: right;\r\n}\r\n.aff-image-figure {\r\n    max-width: 100%;\r\n}\r\n.aff-image-figure img {\r\n    max-width: 100%;\r\n}\r\n",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,c=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(s," */")),a=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(a).concat([i]).join("\n")}var o,c,s;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);r&&i[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9JbWFnZUVkaXRvci93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vSW1hZ2VFZGl0b3Ivd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vSW1hZ2VFZGl0b3IvLi9zcmMvaW1hZ2UtZWRpdG9yLmpzIiwid2VicGFjazovL0ltYWdlRWRpdG9yLy4vc3JjL3N0eWxlLmNzcz83MTYzIiwid2VicGFjazovL0ltYWdlRWRpdG9yLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL0ltYWdlRWRpdG9yLy4vc3JjL3N0eWxlLmNzcyIsIndlYnBhY2s6Ly9JbWFnZUVkaXRvci8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkltYWdlRWRpdG9yIiwiZGF0YSIsImNvbmZpZyIsImFwaSIsInRoaXMiLCJ1cmwiLCJjYXB0aW9uIiwiY2FwdGlvblBvc2l0aW9uIiwiaGFzQm9yZGVyIiwiaW1hZ2VTaXplIiwicGxhY2Vob2xkZXIiLCJzZXR0aW5ncyIsImljb24iLCJhc3NpZ24iLCJ3cmFwcGVyIiwidGl0bGUiLCJmaWd1cmUiLCJ1cmxJbWFnZSIsImNvbnNvbGUiLCJsb2ciLCJfc2V0dXAiLCJ0cmltIiwiX2NyZWF0ZVdyYXBwZXIiLCJfY3JlYXRlSW1hZ2UiLCJfY3JlYXRlVXJsSW5wdXQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJDTEFTUyIsImlubmVySFRNTCIsImlucHV0IiwiY29udGVudEVkaXRhYmxlIiwiX2NsZWFyV3JhcHBlciIsImFwcGVuZENoaWxkIiwibGlzdGVuZXJzIiwib24iLCJjaGlsZE5vZGVzIiwiZXZlbnQiLCJ0YXJnZXQiLCJ0ZXh0Q29udGVudCIsIm1hdGNoIiwiUEFUVEVSTiIsIndhcm4iLCJmaWciLCJpbWciLCJjYXAiLCJhZGRFdmVudExpc3RlbmVyIiwiZXYiLCJoaWRkZW4iLCJyZW1vdmUiLCJzcmMiLCJidXR0b24iLCJfdG9nZ2xlU2V0dGluZyIsInRvZ2dsZSIsImxlbmd0aCIsImJsb2NrcyIsInN0cmV0Y2hCbG9jayIsImdldEN1cnJlbnRCbG9ja0luZGV4IiwiY29udGVudCIsImRlZmF1bHQiLCJvcHRpb25zIiwiZXhwb3J0ZWQiLCJsb2NhbHMiLCJtZW1vIiwiaXNPbGRJRSIsIkJvb2xlYW4iLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsInN0eWxlc0luRG9tIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwicmVzdWx0IiwibW9kdWxlc1RvRG9tIiwibGlzdCIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsIml0ZW0iLCJpZCIsImJhc2UiLCJjb3VudCIsImNvbmNhdCIsImluZGV4Iiwib2JqIiwiY3NzIiwibWVkaWEiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsInB1c2giLCJhZGRTdHlsZSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiYXR0cmlidXRlcyIsIm5vbmNlIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnQiLCJFcnJvciIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJqb2luIiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJhcHBseVRvVGFnIiwicmVtb3ZlQXR0cmlidXRlIiwiYnRvYSIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImZpcnN0Q2hpbGQiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwidXBkYXRlIiwic3R5bGVJbmRleCIsInBhcmVudE5vZGUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJuZXdPYmoiLCJsYXN0SWRlbnRpZmllcnMiLCJuZXdMaXN0IiwidG9TdHJpbmciLCJuZXdMYXN0SWRlbnRpZmllcnMiLCJfaSIsIl9pbmRleCIsInNwbGljZSIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsInVzZVNvdXJjZU1hcCIsIm1hcCIsImNzc01hcHBpbmciLCJzb3VyY2VNYXBwaW5nIiwiYmFzZTY0Iiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290IiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJkZWR1cGUiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsSUFDUSxtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLEdBQUlILEdBQ2UsaUJBQVpDLFFBQ2RB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REFBK0R1RixPQUFPMEQsR0FDMUUsT0FBTzFELE9BQU92RixFQUFNLFFBZHJCa0osRUFBYUgsRUFBV0ksUUFBUUwsS0FBSSxTQUFVTSxHQUNoRCxNQUFPLGlCQUFpQjdELE9BQU93RCxFQUFXTSxZQUFjLElBQUk5RCxPQUFPNkQsRUFBUSxVQUU3RSxNQUFPLENBQUMxRixHQUFTNkIsT0FBTzJELEdBQVkzRCxPQUFPLENBQUN5RCxJQUFnQmxDLEtBQUssTUFPckUsSUFBbUJsQixFQUVicUQsRUFDQWpKLEVBUEosTUFBTyxDQUFDMEQsR0FBU29ELEtBQUssTUF2RUp3QyxDQUF1Qm5FLEVBQU0wRCxHQUUzQyxPQUFJMUQsRUFBSyxHQUNBLFVBQVVJLE9BQU9KLEVBQUssR0FBSSxNQUFNSSxPQUFPN0IsRUFBUyxLQUdsREEsS0FDTm9ELEtBQUssS0FLVjlCLEVBQUtqSCxFQUFJLFNBQVVFLEVBQVNzTCxFQUFZQyxHQUNmLGlCQUFadkwsSUFFVEEsRUFBVSxDQUFDLENBQUMsS0FBTUEsRUFBUyxNQUc3QixJQUFJd0wsRUFBeUIsR0FFN0IsR0FBSUQsRUFDRixJQUFLLElBQUl6TCxFQUFJLEVBQUdBLEVBQUlvQyxLQUFLbUQsT0FBUXZGLElBQUssQ0FFcEMsSUFBSXFILEVBQUtqRixLQUFLcEMsR0FBRyxHQUVQLE1BQU5xSCxJQUNGcUUsRUFBdUJyRSxJQUFNLEdBS25DLElBQUssSUFBSXFELEVBQUssRUFBR0EsRUFBS3hLLEVBQVFxRixPQUFRbUYsSUFBTSxDQUMxQyxJQUFJdEQsRUFBTyxHQUFHSSxPQUFPdEgsRUFBUXdLLElBRXpCZSxHQUFVQyxFQUF1QnRFLEVBQUssTUFLdENvRSxJQUNHcEUsRUFBSyxHQUdSQSxFQUFLLEdBQUssR0FBR0ksT0FBT2dFLEVBQVksU0FBU2hFLE9BQU9KLEVBQUssSUFGckRBLEVBQUssR0FBS29FLEdBTWR2RSxFQUFLZSxLQUFLWixNQUlQSCIsImZpbGUiOiJpbWFnZS1lZGl0b3IubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiSW1hZ2VFZGl0b3JcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiSW1hZ2VFZGl0b3JcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBcIi4vc3R5bGUuY3NzXCJcclxuXHJcblxyXG4vKipcclxuICogRWRpdG9ySnMgUGx1Z2luIGZvciBJbWFnZSBFbWJlZGRpbmdcclxuICogRm9yIGJsb2NrIG9ubHlcclxuICpcclxuICogQHR5cGVkZWYge29iamVjdH0gSW1hZ2VEYXRhXHJcbiAqIEBkZXNjcmlwdGlvbiBEYXRhIHN0cnVjdHVyZSBmb3IgaW5wdXQgYW5kIG91dHB1dC5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IHVybCAtIFVybCBvZiBpbWFnZVxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY2FwdGlvbiAtIENhcHRpb24gZm9yIGltYWdlXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjYXB0aW9uUG9zaXRpb24gLSBQb3NpdGlvbiBmb3IgY2FwdGlvbiAodG9wLCBib3R0b20pXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gaGFzQm9yZGVyIC0gSXMgaW1hZ2UgaGFzIGJvcmRlcj9cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGltYWdlU2l6ZSAtIEltYWdlIHNpemUge3NtYWxsLCBtZWRpdW0sIGxhcmdlLCBmdWxsfVxyXG4gKlxyXG4gKi9cclxuY2xhc3MgSW1hZ2VFZGl0b3Ige1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgbmV3IHBsdWdpbiBhbmQgaW5pdGlhdGUgZGF0YVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SW1hZ2VEYXRhfSAgIGRhdGEgICAgLSBzYXZlZCBkYXRhIGluIEpTT05cclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSAgICAgIGNvbmZpZyAgLSB1c2VyIGNvbmZpZyBpblxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9ICAgICAgYXBpICAgICAtIEVkaXRvckpzIEFQSVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih7ZGF0YSwgY29uZmlnLCBhcGl9KSB7XHJcbiAgICAgICAgLy8gU2V0dXAgZGVmYXVsdFxyXG4gICAgICAgIHRoaXMuYXBpID0gYXBpO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgdXJsOiAnJyxcclxuICAgICAgICAgICAgY2FwdGlvbjogJycsXHJcbiAgICAgICAgICAgIGNhcHRpb25Qb3NpdGlvbjogJ2JvdHRvbScsXHJcbiAgICAgICAgICAgIGhhc0JvcmRlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIGltYWdlU2l6ZTogJ21lZGl1bSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0ge1xyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1Bhc3RlIGltYWdlIFVSTCBoZXJlLi4uJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2xlZnRBbGlnbicsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMTUuOCAxMC41OTJ2Mi4wNDNoMi4zNXYyLjEzOEgxNS44djIuMjMyaC0yLjI1di0yLjIzMmgtMi40di0yLjEzOGgyLjR2LTIuMjhoMi4yNXYuMjM3aDEuMTUtMS4xNXpNMS45IDguNDU1di0zLjQyYzAtMS4xNTQuOTg1LTIuMDkgMi4yLTIuMDloNC4ydjIuMTM3SDQuMTV2My4zNzNIMS45em0wIDIuMTM3aDIuMjV2My4zMjVIOC4zdjIuMTM4SDQuMWMtMS4yMTUgMC0yLjItLjkzNi0yLjItMi4wOXYtMy4zNzN6bTE1LjA1LTIuMTM3SDE0LjdWNS4wODJoLTQuMTVWMi45NDVoNC4yYzEuMjE1IDAgMi4yLjkzNiAyLjIgMi4wOXYzLjQyelwiLz48L3N2Zz4nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdjZW50ZXJBbGlnbicsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMTUuOCAxMC41OTJ2Mi4wNDNoMi4zNXYyLjEzOEgxNS44djIuMjMyaC0yLjI1di0yLjIzMmgtMi40di0yLjEzOGgyLjR2LTIuMjhoMi4yNXYuMjM3aDEuMTUtMS4xNXpNMS45IDguNDU1di0zLjQyYzAtMS4xNTQuOTg1LTIuMDkgMi4yLTIuMDloNC4ydjIuMTM3SDQuMTV2My4zNzNIMS45em0wIDIuMTM3aDIuMjV2My4zMjVIOC4zdjIuMTM4SDQuMWMtMS4yMTUgMC0yLjItLjkzNi0yLjItMi4wOXYtMy4zNzN6bTE1LjA1LTIuMTM3SDE0LjdWNS4wODJoLTQuMTVWMi45NDVoNC4yYzEuMjE1IDAgMi4yLjkzNiAyLjIgMi4wOXYzLjQyelwiLz48L3N2Zz4nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdyaWdodEFsaWduJyxcclxuICAgICAgICAgICAgICAgIGljb246ICc8c3ZnIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0xNS44IDEwLjU5MnYyLjA0M2gyLjM1djIuMTM4SDE1Ljh2Mi4yMzJoLTIuMjV2LTIuMjMyaC0yLjR2LTIuMTM4aDIuNHYtMi4yOGgyLjI1di4yMzdoMS4xNS0xLjE1ek0xLjkgOC40NTV2LTMuNDJjMC0xLjE1NC45ODUtMi4wOSAyLjItMi4wOWg0LjJ2Mi4xMzdINC4xNXYzLjM3M0gxLjl6bTAgMi4xMzdoMi4yNXYzLjMyNUg4LjN2Mi4xMzhINC4xYy0xLjIxNSAwLTIuMi0uOTM2LTIuMi0yLjA5di0zLjM3M3ptMTUuMDUtMi4xMzdIMTQuN1Y1LjA4MmgtNC4xNVYyLjk0NWg0LjJjMS4yMTUgMCAyLjIuOTM2IDIuMiAyLjA5djMuNDJ6XCIvPjwvc3ZnPidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2hhc0JvcmRlcicsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxnIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgwLjAwMDAwMCwyNS4wMDAwMDApIHNjYWxlKDAuMTAwMDAwLC0wLjEwMDAwMClcIiBmaWxsPVwiIzAwMDAwMFwiIHN0cm9rZT1cIm5vbmVcIj48cGF0aCBkPVwiTTQ1IDIwMCBjLTMgLTUgLTEgLTEwIDQgLTEwIDYgMCAxMSA1IDExIDEwIDAgNiAtMiAxMCAtNCAxMCAtMyAwIC04IC00IC0xMSAtMTB6XCIvPjxwYXRoIGQ9XCJNMTM4IDIwMyBjNyAtMyAxNiAtMiAxOSAxIDQgMyAtMiA2IC0xMyA1IC0xMSAwIC0xNCAtMyAtNiAtNnpcIi8+PHBhdGggZD1cIk0xODUgMjAwIGMzIC01IDExIC0xMCAxNiAtMTAgNiAwIDcgNSA0IDEwIC0zIDYgLTExIDEwIC0xNiAxMCAtNiAwIC03IC00IC00IC0xMHpcIi8+PHBhdGggZD1cIk0yMDEgMTU0IGMwIC0xMSAzIC0xNCA2IC02IDMgNyAyIDE2IC0xIDE5IC0zIDQgLTYgLTIgLTUgLTEzelwiLz48cGF0aCBkPVwiTTQxIDEwNCBjMCAtMTEgMyAtMTQgNiAtNiAzIDcgMiAxNiAtMSAxOSAtMyA0IC02IC0yIC01IC0xM3pcIi8+PHBhdGggZD1cIk0yMDEgMTA0IGMwIC0xMSAzIC0xNCA2IC02IDMgNyAyIDE2IC0xIDE5IC0zIDQgLTYgLTIgLTUgLTEzelwiLz48cGF0aCBkPVwiTTQwIDYxIGMwIC01IDUgLTEzIDEwIC0xNiA2IC0zIDEwIC0yIDEwIDQgMCA1IC00IDEzIC0xMCAxNiAtNSAzIC0xMCAyIC0xMCAtNHpcIi8+PHBhdGggZD1cIk0xODkgNTMgYy0xMyAtMTYgLTEyIC0xNyA0IC00IDkgNyAxNyAxNSAxNyAxNyAwIDggLTggMyAtMjEgLTEzelwiLz48cGF0aCBkPVwiTTg4IDQzIGM3IC0zIDE2IC0yIDE5IDEgNCAzIC0yIDYgLTEzIDUgLTExIDAgLTE0IC0zIC02IC02elwiLz48cGF0aCBkPVwiTTEzOCA0MyBjNyAtMyAxNiAtMiAxOSAxIDQgMyAtMiA2IC0xMyA1IC0xMSAwIC0xNCAtMyAtNiAtNnpcIi8+PC9nPjwvc3ZnPidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ2NhcHRpb25Qb3NpdGlvbicsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMTUuOCAxMC41OTJ2Mi4wNDNoMi4zNXYyLjEzOEgxNS44djIuMjMyaC0yLjI1di0yLjIzMmgtMi40di0yLjEzOGgyLjR2LTIuMjhoMi4yNXYuMjM3aDEuMTUtMS4xNXpNMS45IDguNDU1di0zLjQyYzAtMS4xNTQuOTg1LTIuMDkgMi4yLTIuMDloNC4ydjIuMTM3SDQuMTV2My4zNzNIMS45em0wIDIuMTM3aDIuMjV2My4zMjVIOC4zdjIuMTM4SDQuMWMtMS4yMTUgMC0yLjItLjkzNi0yLjItMi4wOXYtMy4zNzN6bTE1LjA1LTIuMTM3SDE0LjdWNS4wODJoLTQuMTVWMi45NDVoNC4yYzEuMjE1IDAgMi4yLjkzNiAyLjIgMi4wOXYzLjQyelwiLz48L3N2Zz4nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXTtcclxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZGF0YSwgZGF0YSk7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbmZpZywgY29uZmlnKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IGVsZW1lbnRcclxuICAgICAgICB0aGlzLndyYXBwZXIgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnUnVuOiByZW5kZXIoKScpO1xyXG4gICAgICAgIHRoaXMuX3NldHVwKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlcjtcclxuICAgIH1cclxuXHJcbiAgICAvKnJlbmRlclNldHRpbmdzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVTZXR0aW5nKCk7XHJcbiAgICB9Ki9cclxuXHJcbiAgICB2YWxpZGF0ZShkYXRhKSB7XHJcbiAgICAgICAgaWYoICFkYXRhICYmICFkYXRhLnVybC50cmltKCkgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldHVwKCkge1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnUnVuOiBzZXR1cCgpJyk7XHJcbiAgICAgICAgLy8gU2V0dXAgd3JhcHBlclxyXG4gICAgICAgIHRoaXMuX2NyZWF0ZVdyYXBwZXIoKTtcclxuXHJcbiAgICAgICAgaWYoICEhdGhpcy5kYXRhLnVybCApIHtcclxuICAgICAgICAgICAgdGhpcy5fY3JlYXRlSW1hZ2UoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVVcmxJbnB1dCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlV3JhcHBlcigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnUnVuOiBXcmFwcGVyKCknKTtcclxuICAgICAgICB0aGlzLndyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLndyYXBwZXIuY2xhc3NMaXN0LmFkZCgnY2R4LWJsb2NrJyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5hZGQoSW1hZ2VFZGl0b3IuQ0xBU1Mud3JhcHBlcik7XHJcbiAgICB9XHJcblxyXG4gICAgX2NsZWFyV3JhcHBlcigpIHtcclxuICAgICAgICBpZiggdGhpcy53cmFwcGVyICkge1xyXG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVVcmxJbnB1dCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnUnVuOiBVcmxJbnB1dCgpJyk7XHJcbiAgICAgICAgbGV0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgaW5wdXQuY29udGVudEVkaXRhYmxlID0gdHJ1ZTtcclxuICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdjZHgtaW5wdXQnKTtcclxuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9ICdDb2JhIGR1bHUnOyAvL3RoaXMuY29uZmlnLnBsYWNlaG9sZGVyO1xyXG5cclxuICAgICAgICB0aGlzLl9jbGVhcldyYXBwZXIoKTtcclxuICAgICAgICB0aGlzLndyYXBwZXIuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG5cclxuICAgICAgICB0aGlzLmFwaS5saXN0ZW5lcnMub24odGhpcy53cmFwcGVyLmNoaWxkTm9kZXNbMF0sICdibHVyJywgKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgaWYoICFldmVudC50YXJnZXQudGV4dENvbnRlbnQgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIGZpbGUgbG9hZGVkIScpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYoIGV2ZW50LnRhcmdldC50ZXh0Q29udGVudC5tYXRjaChJbWFnZUVkaXRvci5QQVRURVJOLnVybEltYWdlKSA9PT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBVUkwhJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jcmVhdGVJbWFnZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVJbWFnZSgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnUnVuOiBjcmVhdGVJbWFnZSgpJywgdGhpcy5kYXRhKTtcclxuICAgICAgICBsZXQgZmlnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmlndXJlJyk7XHJcbiAgICAgICAgbGV0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIGxldCBjYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWdjYXB0aW9uJyk7XHJcblxyXG4gICAgICAgIGNhcC50ZXh0Q29udGVudCA9ICEhdGhpcy5kYXRhLmNhcHRpb24gPyB0aGlzLmRhdGEuY2FwdGlvbiA6ICdZb3VyIGxhYmVsIGhlcmUuLi4nO1xyXG4gICAgICAgIGNhcC5jb250ZW50RWRpdGFibGUgPSB0cnVlO1xyXG5cclxuICAgICAgICBjYXAuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoZXYgPT4ge1xyXG4gICAgICAgICAgICBldi50YXJnZXQuY2xhc3NMaXN0LmFkZCgnY2R4LWlucHV0Jyk7XHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBjYXAuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIChldiA9PiB7XHJcbiAgICAgICAgICAgIGlmKCBldi50YXJnZXQudGV4dENvbnRlbnQgPT09ICcnICkge1xyXG4gICAgICAgICAgICAgICAgZXYudGFyZ2V0LmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXYudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2NkeC1pbnB1dCcpO1xyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgaW1nLnNyYyA9ICEhdGhpcy5kYXRhLnVybCA/IHRoaXMuZGF0YS51cmwgOiB0aGlzLndyYXBwZXIuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudDtcclxuICAgICAgICBmaWcuY2xhc3NMaXN0LmFkZChJbWFnZUVkaXRvci5DTEFTUy5maWd1cmUpO1xyXG5cclxuICAgICAgICB0aGlzLl9jbGVhcldyYXBwZXIoKTtcclxuXHJcbiAgICAgICAgaWYoIHRoaXMuZGF0YS5jYXB0aW9uUG9zaXRpb24gPT09ICd0b3AnICYmIGNhcC50ZXh0Q29udGVudCAhPT0gJycgKSB7XHJcbiAgICAgICAgICAgIGZpZy5hcHBlbmRDaGlsZChjYXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaWcuYXBwZW5kQ2hpbGQoaW1nKTtcclxuICAgICAgICBpZiggdGhpcy5kYXRhLmNhcHRpb25Qb3NpdGlvbiA9PT0gJ2JvdHRvbScgJiYgY2FwLnRleHRDb250ZW50ICE9PSAnJyApIHtcclxuICAgICAgICAgICAgZmlnLmFwcGVuZENoaWxkKGNhcCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLndyYXBwZXIuYXBwZW5kQ2hpbGQoZmlnKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlU2V0dGluZygpIHtcclxuICAgICAgICBsZXQgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2V0dGluZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnY2R4LXNldHRpbmdzLWJ1dHRvbicpO1xyXG4gICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gdGhpcy5zZXR0aW5nc1tpXS5pY29uO1xyXG5cclxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlU2V0dGluZyh0aGlzLnNldHRpbmdzW2ldLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2NkeC1zZXR0aW5ncy1idXR0b24tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB3cmFwcGVyO1xyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVTZXR0aW5nKG5hbWUpIHtcclxuICAgICAgICBpZiggbmFtZSA9PT0gdGhpcy5zZXR0aW5nc1szXS5uYW1lICkge1xyXG4gICAgICAgICAgICB0aGlzLndyYXBwZXIuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1ib3JkZXInKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiggbmFtZSA9PT0gdGhpcy5zZXR0aW5nc1s0XS5uYW1lICkge1xyXG4gICAgICAgICAgICB0aGlzLmFwaS5ibG9ja3Muc3RyZXRjaEJsb2NrKHRoaXMuYXBpLmJsb2Nrcy5nZXRDdXJyZW50QmxvY2tJbmRleCgpLCAhIXRoaXMuZGF0YS5pbWFnZVNpemUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNhdmUoY29udGVudCkge1xyXG4gICAgICAgIGlmKCB0aGlzLmRhdGEudXJsLnRyaW0oKSAhPT0gJycgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHRoaXMuZGF0YS5jYXB0aW9uUG9zaXRpb24gPT09ICd0b3AnID8gdGhpcy53cmFwcGVyLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1sxXS5zcmMgOiB0aGlzLndyYXBwZXIuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLnNyYyxcclxuICAgICAgICAgICAgICAgIGNhcHRpb246IHRoaXMuZGF0YS5jYXB0aW9uUG9zaXRpb24gPT09ICd0b3AnID8gdGhpcy53cmFwcGVyLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudCA6IHRoaXMud3JhcHBlci5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMV0udGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IHRvb2xib3goKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGl0bGU6ICdFbWJlZCBJbWFnZScsXHJcbiAgICAgICAgICAgIGljb246ICc8c3ZnIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XFxuJyArXHJcbiAgICAgICAgICAgICAgICAnICAgIDxwYXRoIGQ9XCJNMy4xNSAxMy42MjhBNy43NDkgNy43NDkgMCAwIDAgMTAgMTcuNzVhNy43NCA3Ljc0IDAgMCAwIDYuMzA1LTMuMjQybC0yLjM4Ny0yLjEyNy0yLjc2NSAyLjI0NC00LjM4OS00LjQ5Ni0zLjYxNCAzLjV6bS0uNzg3LTIuMzAzbDQuNDQ2LTQuMzcxIDQuNTIgNC42MyAyLjUzNC0yLjA1NyAzLjUzMyAyLjc5N2MuMjMtLjczNC4zNTQtMS41MTQuMzU0LTIuMzI0YTcuNzUgNy43NSAwIDEgMC0xNS4zODcgMS4zMjV6TTEwIDIwQzQuNDc3IDIwIDAgMTUuNTIzIDAgMTBTNC40NzcgMCAxMCAwczEwIDQuNDc3IDEwIDEwLTQuNDc3IDEwLTEwIDEwelwiLz5cXG4nICtcclxuICAgICAgICAgICAgICAgICc8L3N2Zz4nXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IENMQVNTKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdyYXBwZXI6ICdhZmYtaW1hZ2Utd3JhcHBlcicsXHJcbiAgICAgICAgICAgIGZpZ3VyZTogJ2FmZi1pbWFnZS1maWd1cmUnLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBQQVRURVJOKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVybEltYWdlOiAvKGh0dHBbc10/OlxcL1xcLy4qPy4oanBnfHBuZ3xnaWZ8c3ZnKSkvZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VFZGl0b3I7IiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlLmNzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxudmFyIGV4cG9ydGVkID0gY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHt9O1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRlZDsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbnZhciBzdHlsZXNJbkRvbSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRG9tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRG9tW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc0luRG9tLnB1c2goe1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiBhZGRTdHlsZShvYmosIG9wdGlvbnMpLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICB2YXIgYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcblxuICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLm1lZGlhID8gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKS5jb25jYXQob2JqLmNzcywgXCJ9XCIpIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ21lZGlhJyk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXdMaXN0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRvbVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5Eb21bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5Eb20uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmFmZi1pbWFnZS13cmFwcGVyIC5oYXMtYm9yZGVyIHtcXHJcXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggYmxhY2s7XFxyXFxufVxcclxcbi5hZmYtaW1hZ2Utd3JhcHBlciAubGVmdC1hbGlnbmVkIHtcXHJcXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcXHJcXG59XFxyXFxuLmFmZi1pbWFnZS13cmFwcGVyIC5jZW50ZXJlZC1hbGlnbmVkIHtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbn1cXHJcXG4uYWZmLWltYWdlLXdyYXBwZXIgLnJpZ2h0LWFsaWduZWQge1xcclxcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcXHJcXG59XFxyXFxuLmFmZi1pbWFnZS1maWd1cmUge1xcclxcbiAgICBtYXgtd2lkdGg6IDEwMCU7XFxyXFxufVxcclxcbi5hZmYtaW1hZ2UtZmlndXJlIGltZyB7XFxyXFxuICAgIG1heC13aWR0aDogMTAwJTtcXHJcXG59XFxyXFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSwgZGVkdXBlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2ldKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250aW51ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuXG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8ICcnKS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICByZXR1cm4gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xufSJdLCJzb3VyY2VSb290IjoiIn0=